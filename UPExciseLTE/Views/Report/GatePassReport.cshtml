@model UPExciseLTE.Models.GatePass
@{
    ViewBag.Title = "ReportFLB11";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="form-actions" style="text-align:right">
    <button type="button" class="btn green"><a href="/GatePass/GenerateGatePass">Back To Print Gate Pass</a></button>
</div>
<br />
<div class="page-content-inner">
    <div class="row ">
        <div class="col-md-12">
            <div class="portlet box green">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-gift"></i>@ViewBag.PassType Report
                    </div>
                </div>
                <div class="portlet-body form" style="background-color:#f5f5f5">
                    <div class="form-body" id="printablediv">
                        <div class="form-group col-md-12">
                            <div class="row">
                                <div class="col-md-3">
                                    <img src="~/Img/uttar_pradesh_government.png" style="width:80px; height:80px;" />
                                </div>
                                <div class="col-md-8">
                                    <div class="row">
                                        <h1><strong>Uttar Pradesh Excise Department</strong></h1>
                                    </div>
                                    <div class="row" style="margin-left:29%">
                                        <centre><b>@ViewBag.PassType</b></centre>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    @*<centre><img src="~/Img/QRCode1.jpg" class="QRCodeImg" /></centre>*@
                                    @if (ViewBag.QRCodeImage != null)
                                    {
                                        <centre>
                                            <img src="@ViewBag.QRCodeImage" alt="" class="QRCodeImg" />
                                        </centre>
                                    }
                                </div>
                            </div>
                        </div>
                        <div>
                            <hr />
                        </div>
                        <div class="form-group col-md-4">
                            <div>
                                <label class="control-label">No. : </label>

                                @*@Html.TextBox("55-2018-19-FL3A-18223", new { @id = "txtVehicleDriverName", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                @Html.DisplayFor(Model => Model.GatePassNo)
                            </div>
                        </div>

                        <div class="form-group col-md-4">

                            <div>
                                <label class="control-label">Date : </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                @Html.DisplayFor(Model => Model.ToDate)
                            </div>
                        </div>


                        <div class="form-group col-md-4">
                            <div>
                                <label class="control-label">Valid Till : </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                @Html.DisplayFor(Model => Model.FromDate)
                            </div>
                        </div>

                        <div class="form-group col-md-12">
                            <div>
                                <label class="control-label">1. Name of Consignor : </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                @Html.DisplayFor(Model => Model.ConsignorName)
                            </div>
                        </div>

                        <div class="form-group col-md-12">
                            <div>
                                <label class="control-label">2. Name of Consignee : </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                @Html.DisplayFor(Model => Model.ConsigneeName)
                            </div>
                        </div>

                        <div class="form-group col-md-12">
                            <div>
                                <label class="control-label">3. Place to which issue and route by which despatched By Road ( BY ROAD) Check Post Via (............) Vehicle No : </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                @Html.DisplayFor(Model => Model.VehicleNo)
                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <div>
                                <label class="control-label">4. Number / date of Permit, if any :        </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                NA
                            </div>
                        </div>

                        <div class="form-group col-md-6">
                            <div>
                                <label class="control-label">5. Duty Paid / In Bond </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                Duty Paid
                            </div>
                        </div>


                        <div class="form-group col-md-6">
                            <div>
                                <label class="control-label">6. Export Duty : Rs. </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                N.A
                            </div>
                        </div>


                        <div class="form-group col-md-6">
                            <div>
                                <label class="control-label">7. Consideration Fee Rs. </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                @Html.DisplayFor(Model => Model.ConsiderationFees)
                            </div>
                        </div>

                        <div class="form-group col-md-6">
                            <div>
                                <label class="control-label">Addl. Consi. Fee Rs. </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                1807.68
                            </div>
                        </div>

                        <div class="form-group col-md-12">
                            <div>
                                <label class="control-label">8. Vehicle Agency Details </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                                @Html.DisplayFor(Model => Model.AgencyNameAndAddress)
                            </div>
                        </div>

                        <div class="form-group col-md-12">
                            <div>
                                <label class="control-label">It should be returned within 90 days after verification by competent authority. </label>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@

                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <div>
                                <h4><strong>FOR DETAILS BELOW :</strong></h4>
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@

                            </div>
                        </div>

                        <div class="form-group col-md-12">

                            <div class="portlet-body form" style="background-color:#f5f5f5">
                                <div class="table-scrollable">

                                    <table id="myDatatable" class="table table-striped table-bordered table-hover">
                                        <thead style="background-color:darkgray">
                                            <tr>
                                                <th>S.N</th>
                                                <th>Description of Foreign Liquor</th>
                                                <th>Batch No</th>
                                                <th>Bottles, Flask Quantity <br /> Contained in each</th>
                                                <th><div style="margin-left:12%">Total Litres</div><hr /><div style="margin-left:39%">BL</div></th>
                                                <th>Alcoholic Strength</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @*@foreach (var item in Model.DistrictWholeSaleToRetailorList)
                                                {
                                                    <tr>
                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.RowNum)
                                                        </td>
                                                        <td>@Html.DisplayFor(modelItem => item.Brand)</td>
                                                        <td>@Html.DisplayFor(modelItem => item.BatchNo)</td>
                                                        <td>@Html.DisplayFor(modelItem => item.BottleQuantity)</td>
                                                        <td>@Html.DisplayFor(modelItem => item.TotalLitres)</td>
                                                        <td>@Html.DisplayFor(modelItem => item.AlcoholicStrength)</td>
                                                    </tr>
                                                }*@

                                            @foreach (var item in Model.DistrictWholeSaleToRetailorList)
                                            {
                                                <tr>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.RowNum)
                                                    </td>
                                                    <td>@Html.DisplayFor(modelItem => item.Brand)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.BatchNo)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.BottleQuantity)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.TotalLitres)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.AlcoholicStrength)</td>
                                                </tr>
                                            }




                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="2"></td>
                                                <td>Total :</td>
                                                <td>@Model.TotalBottleQuantity</td>
                                                <td>@Model.TotalLitresQuantity</td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>

                                </div>
                            </div>
                        </div>

                        &nbsp;  <br />&nbsp;<br />&nbsp;<br />&nbsp;<br />@*&nbsp;<br />&nbsp;<br />*@@*&nbsp;<br />&nbsp;<br />&nbsp;<br />*@

                        <div class="form-group col-md-6">
                            <label class="control-label">Signature of Authorised Signatory </label>
                            <div>
                                Wave Distilleries & Breweried <br />
                                Limited Aligarh
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                            </div>
                        </div>
                        <div class="form-group col-md-6" style="text-align:right">
                            <label class="control-label">Excise Inspector </label>
                            <div>
                                (In-Charge) <br />
                                (Dept. Of Excise)
                                @*@Html.TextBox("26/09/2018", new { @id = "txtVehicleDriverName1", @class = "form-control ", @placeholder = "Vehicle Driver Name", @required = "required" })*@
                            </div>
                        </div>
                    </div>
                    <div style="clear:both"></div>
                    <center>
                        <div class="form-actions">
                            <button type="button" onclick="javascript: printDiv('printablediv')" class="btn green">Print</button>

                        </div>
                    </center>
                </div>

            </div>
        </div>
    </div>
</div>

@*<script type="text/javascript">

            function PrintDiv() {
                var divToPrint = document.getElementById('printablediv');
               var popupWin = window.open('', '_blank', 'width=300,height=300');
               popupWin.document.open();
               popupWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</html>');
                popupWin.document.close();
                    }
    </script>*@
<script language="javascript" type="text/javascript">


    $(function () {
        $('.DispatchBottle,.AvailableBox,.DispatchBottle,.CalculatedDuty,.CalculatedAdditionalDuty').prop('readonly', true);
        var $tblrows = $("#tblBMWholeSale tbody tr");
        $tblrows.each(function (index) {
            var $tblrow = $(this);
            debugger;
            $tblrow.find('.DispatchBox').on('change', function () {
                debugger;
                //var dispatchBox = $tblrow.find("[id=txtDispatchBox]").val();
                //var availableBox = $tblrow.find("[id=lblAvailableBox]").val();
                //var size = $tblrow.find("[id=lblSize]").val();
                //var duty = $tblrow.find("[id=lblDuty]").val();
                //var addDuty = $tblrow.find("[id=lblAddDuty]").val();
                //var dispatchBottle = parseInt(dispatchBox) * parseInt(size);
                //var calculatedDuty = parseFloat(dispatchBottle) * parseFloat(duty);
                //var calculatedAdditionalDuty = parseFloat(dispatchBottle) * parseFloat(addDuty);
                //$('#lblDispatchBottle').val(dispatchBottle);
                //$('#lblCalculatedDuty').val(calculatedDuty.toFixed(2));
                //$('#lblCalculatedAdditionalDuty').val(calculatedAdditionalDuty.toFixed(2));

                var dispatchBox = $tblrow.find("[name='item.DispatchBox']").val();

                var availableBox = $tblrow.find("[name='item.AvailableBox']").val();
                var size = $tblrow.find("[name='item.Size']").val();
                var duty = $tblrow.find("[name='item.Duty']").val();
                var addDuty = $tblrow.find("[name='item.AddDuty']").val();
                var dispatchBottle = parseInt(dispatchBox, 10) * parseInt(size, 10);
                var calculatedDuty = parseFloat(dispatchBottle) * parseFloat(duty);
                var calculatedAdditionalDuty = parseFloat(dispatchBottle) * parseFloat(addDuty);
                $tblrow.find('.DispatchBottle').val(dispatchBottle);
                $tblrow.find('.CalculatedDuty').val(calculatedDuty.toFixed(2));
                $tblrow.find('.CalculatedAdditionalDuty').val(calculatedAdditionalDuty.toFixed(2));

                //var subTotal = parseInt(qty, 10) * parseFloat(price);

                //if (!isNaN(subTotal)) {

                //    $tblrow.find('.subtot').val(subTotal.toFixed(2));
                //    var grandTotal = 0;

                //    $(".subtot").each(function () {
                //        var stval = parseFloat($(this).val());
                //        grandTotal += isNaN(stval) ? 0 : stval;
                //    });

                //    $('.grdtot').val(grandTotal.toFixed(2));
                //}
            });
        });
    });



    function printDiv(divID) {
        //Get the HTML of div
        var divElements = document.getElementById(divID).innerHTML;
        //Get the HTML of whole page
        var oldPage = document.body.innerHTML;

        //Reset the page's HTML with div's HTML only
        document.body.innerHTML =
          "<html><head><title></title></head><body>" +
          divElements + "</body>";

        //Print Page
        window.print();

        //Restore orignal HTML
        document.body.innerHTML = oldPage;


    }
</script>





